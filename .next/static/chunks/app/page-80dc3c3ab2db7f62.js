(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4723:function(e,t,r){Promise.resolve().then(r.bind(r,6911))},6911:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var l=r(7437),s=r(2265);function a(){let[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)([]),[o,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[c,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(""),[u,m]=(0,s.useState)(null),g=(0,s.useRef)(null),f=(0,s.useRef)([]),b=(0,s.useCallback)(e=>{p(e);let t=setTimeout(()=>{p("")},5e3);return()=>clearTimeout(t)},[]);(0,s.useEffect)(()=>{let e=localStorage.getItem("users");if(e)try{a(JSON.parse(e))}catch(e){console.error("Failed to parse saved users",e),b("Failed to load saved users")}},[b]),(0,s.useEffect)(()=>{if(r.length>0)try{localStorage.setItem("users",JSON.stringify(r))}catch(e){console.error("Failed to save users",e),b("Failed to save users")}},[r,b]);let w=(0,s.useCallback)(async e=>{let t=new AbortController,r=t.signal;h(!0);try{let t=await fetch("/api/chart/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e}),signal:r});if(!t.ok)throw Error("HTTP error! Status: ".concat(t.status));let l=await t.json();if(l.error)throw Error(l.error);l.isVerified?(a(e=>[...e,l]),b("Added @".concat(e," to the chart!"))):(i(e=>[...e,l]),b("Added @".concat(e," as temporary user. Connect wallet to verify.")))}catch(e){e instanceof Error&&"AbortError"!==e.name&&(console.error("Error fetching user:",e),b("Error: ".concat(e.message||"Failed to fetch user")))}finally{h(!1)}return()=>t.abort()},[b]);(0,s.useEffect)(()=>{let e=g.current;if(!e)return;let t=t=>{let r=e.getBoundingClientRect(),l=t.clientX-r.left,s=t.clientY-r.top,a=f.current.find(e=>{let{x:t,y:r,size:a}=e;return l>=t-a/2&&l<=t+a/2&&s>=r-a/2&&s<=r+a/2});a?m({user:a.user,x:a.x,y:a.y}):m(null)};return e.addEventListener("mousemove",t),()=>{e.removeEventListener("mousemove",t)}},[]);let j=(0,s.useCallback)(()=>{let e=g.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let l=new Map;f.current=[];let s=window.devicePixelRatio||1,a=e.getBoundingClientRect();e.width=a.width*s,e.height=a.height*s,t.scale(s,s),t.clearRect(0,0,a.width,a.height);let i=t.createLinearGradient(0,0,a.width,a.height);i.addColorStop(0,"rgba(10, 10, 18, 0.95)"),i.addColorStop(1,"rgba(20, 10, 30, 0.95)"),t.fillStyle=i,t.fillRect(0,0,a.width,a.height),t.strokeStyle="rgba(100, 65, 165, 0.15)",t.lineWidth=1;for(let e=0;e<=10;e++){let r=e/10*a.width;t.beginPath(),t.moveTo(r,0),t.lineTo(r,a.height),t.stroke()}for(let e=0;e<=10;e++){let r=e/10*a.height;t.beginPath(),t.moveTo(0,r),t.lineTo(a.width,r),t.stroke()}t.strokeStyle="rgba(180, 120, 255, 0.5)",t.lineWidth=2,t.beginPath(),t.moveTo(0,a.height-30),t.lineTo(a.width,a.height-30),t.stroke(),t.beginPath(),t.moveTo(30,0),t.lineTo(30,a.height),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.8)",t.font="12px Arial",t.textAlign="center",t.fillText("Total Score",a.width/2,a.height-10),t.save(),t.translate(10,a.height/2),t.rotate(-Math.PI/2),t.fillText("Total Badges",0,0),t.restore();let n=Math.max(100,...r.map(e=>e.totalScore),...o.map(e=>e.totalScore)),d=Math.max(5,...r.map(e=>e.badges.length),...o.map(e=>e.badges.length));t.textAlign="right",t.fillText("0",25,a.height-25),t.fillText(n.toString(),a.width-5,a.height-25),t.textAlign="left",t.fillText("0",35,a.height-35),t.fillText(d.toString(),35,15);let c=[...r,...o],h=requestAnimationFrame(()=>{let e=e=>new Promise((t,r)=>{if(l.has(e)){t(l.get(e));return}let s=new window.Image;s.crossOrigin="anonymous",s.onload=()=>{l.set(e,s),t(s)},s.onerror=()=>{console.error("Failed to load image: ".concat(e)),r(Error("Failed to load image: ".concat(e)))},s.src=e});if(c.forEach(r=>{let l=!("walletScore"in r),s=30+r.totalScore/n*(a.width-60),o=a.height-30-r.badges.length/d*(a.height-60),i=Math.min(a.width,a.height)/10*.8;f.current.push({x:s,y:o,size:i,user:r}),t.fillStyle="rgba(255, 255, 255, 0.8)",t.font="10px Arial",t.textAlign="center",t.fillText("@".concat(r.username),s,o+i/2+15);let c=t.createRadialGradient(s,o,i/2,s,o,i);c.addColorStop(0,l?"rgba(255, 100, 100, 0.8)":"rgba(138, 43, 226, 0.8)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),t.beginPath(),t.rect(s-i/2-5,o-i/2-5,i+10,i+10),t.fillStyle=c,t.fill(),t.beginPath(),t.rect(s-i/2,o-i/2,i,i),t.strokeStyle=l?"rgba(255, 100, 100, 0.9)":"rgba(138, 43, 226, 0.9)",t.lineWidth=2,t.stroke(),e(r.profileImageUrl).then(e=>{t.save(),t.beginPath(),t.rect(s-i/2,o-i/2,i,i),t.clip(),t.drawImage(e,s-i/2,o-i/2,i,i),t.restore()}).catch(e=>{console.error("Error loading profile image for ".concat(r.username,":"),e)})}),u){let{user:e,x:r,y:l}=u,s=!("walletScore"in e);t.fillStyle=s?"rgba(255, 100, 100, 0.9)":"rgba(138, 43, 226, 0.9)",t.fillRect(r-80,l-100,160,80),t.fillStyle="white",t.font="12px Arial",t.textAlign="center",t.fillText("Score: ".concat(e.totalScore),r,l-75),t.fillText("Badges: ".concat(e.badges.length),r,l-55),s?t.fillText("Connect wallet for full score",r,l-35):t.fillText("Twitter: ".concat(e.twitterScore),r,l-35)}});return()=>{cancelAnimationFrame(h),l.clear()}},[r,o,u]);return(0,s.useEffect)(()=>{let e=j();return()=>{e&&"function"==typeof e&&e()}},[j]),(0,l.jsx)("main",{className:"min-h-screen flex flex-col items-center p-4 md:p-8 bg-[#050508] bg-crystal-gradient",children:(0,l.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,l.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold text-white flex items-center gap-2 mb-6",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-purple-400",children:[(0,l.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),(0,l.jsx)("path",{d:"M5 3v4"}),(0,l.jsx)("path",{d:"M19 17v4"}),(0,l.jsx)("path",{d:"M3 5h4"}),(0,l.jsx)("path",{d:"M17 19h4"})]}),(0,l.jsx)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500",children:"User Score & Badge Analysis"})]}),(0,l.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&w(e)},className:"w-full flex gap-2 max-w-md",children:[(0,l.jsx)("div",{className:"relative flex-1",children:(0,l.jsx)("input",{type:"text",placeholder:"Enter Twitter username",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 rounded-md bg-[#1a1a2e]/80 border border-purple-500/30 text-white placeholder:text-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})}),(0,l.jsx)("button",{type:"submit",disabled:c,className:"p-2 rounded-md bg-[#1a1a2e]/80 border border-purple-500/30 text-gray-200 hover:bg-purple-900/30 hover:border-purple-500/50 transition-all",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.jsx)("path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"})})}),(0,l.jsx)("button",{type:"button",onClick:()=>d(!n),className:"p-2 rounded-md bg-purple-600/80 border border-purple-500/50 text-white hover:bg-purple-700 transition-all",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),(0,l.jsx)("path",{d:"M5 3v4"}),(0,l.jsx)("path",{d:"M19 17v4"}),(0,l.jsx)("path",{d:"M3 5h4"}),(0,l.jsx)("path",{d:"M17 19h4"})]})})]}),x&&(0,l.jsx)("div",{className:"mt-4 w-full max-w-md p-3 rounded-lg bg-purple-900/30 border border-purple-500/30 text-white text-center animate-fadeIn",children:x})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[n&&(0,l.jsx)("div",{className:"w-full md:w-96",children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-[#1a1a2e]/90 to-[#16162a]/80 rounded-lg overflow-hidden h-full border border-purple-500/30 shadow-xl",style:{backdropFilter:"blur(10px)"},children:[(0,l.jsx)("div",{className:"bg-purple-900/80 p-3 border-b border-purple-500/30",children:(0,l.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-purple-300 mr-2",children:[(0,l.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),(0,l.jsx)("path",{d:"M5 3v4"}),(0,l.jsx)("path",{d:"M19 17v4"}),(0,l.jsx)("path",{d:"M3 5h4"}),(0,l.jsx)("path",{d:"M17 19h4"})]}),"User Analysis"]})}),(0,l.jsx)("div",{className:"p-4",children:0===r.length&&0===o.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center text-gray-200",children:[(0,l.jsx)("div",{className:"border-2 border-dashed border-purple-400/30 p-6 rounded-lg mb-4",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-purple-300 mx-auto mb-2",children:[(0,l.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),(0,l.jsx)("path",{d:"M5 3v4"}),(0,l.jsx)("path",{d:"M19 17v4"}),(0,l.jsx)("path",{d:"M3 5h4"}),(0,l.jsx)("path",{d:"M17 19h4"})]})}),(0,l.jsx)("p",{children:"No users analyzed yet. Enter a Twitter username to see their score and badges."})]}):(0,l.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:[...r,...o].map(e=>{let t=!("walletScore"in e);return(0,l.jsxs)("div",{className:"".concat(t?"bg-red-900/20":"bg-purple-900/20"," rounded-lg p-3 border ").concat(t?"border-red-500/30":"border-purple-500/30"," hover:border-opacity-50 transition-all"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-none overflow-hidden border-2 shadow-glow border-purple-400/70",children:(0,l.jsx)("img",{src:e.profileImageUrl||"/placeholder.svg",alt:e.username,className:"w-full h-full object-cover"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-bold text-white",children:["@",e.username]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("span",{className:"text-xs text-purple-200",children:["Score: ",e.totalScore]}),(0,l.jsx)("span",{className:"text-xs text-purple-200",children:"â€¢"}),(0,l.jsxs)("span",{className:"text-xs text-purple-200",children:["Badges: ",e.badges.length]})]})]}),t&&(0,l.jsxs)("div",{className:"ml-auto px-2 py-1 bg-red-600/70 rounded text-xs font-medium text-white flex items-center",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,l.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),(0,l.jsx)("path",{d:"M12 9v4"}),(0,l.jsx)("path",{d:"M12 17h.01"})]}),"Temp"]}),!t&&e.isVerified&&(0,l.jsx)("div",{className:"ml-auto px-2 py-1 bg-blue-600/70 rounded text-xs font-medium text-white",children:"Verified"})]}),(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-purple-200 mb-1",children:"Badges:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.badges.map(e=>(0,l.jsxs)("span",{className:"inline-flex items-center rounded-md border border-purple-400/30 bg-purple-800/30 px-2 py-1 text-xs font-medium text-white",children:[e.icon," ",e.name]},e.id)),0===e.badges.length&&(0,l.jsx)("span",{className:"text-xs text-purple-300",children:"No badges earned yet"})]})]}),!t&&(0,l.jsxs)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[(0,l.jsxs)("div",{className:"bg-purple-900/30 p-2 rounded border border-purple-500/20",children:[(0,l.jsx)("div",{className:"text-xs text-purple-300",children:"Twitter"}),(0,l.jsx)("div",{className:"font-bold text-white",children:e.twitterScore})]}),(0,l.jsxs)("div",{className:"bg-purple-900/30 p-2 rounded border border-purple-500/20",children:[(0,l.jsx)("div",{className:"text-xs text-purple-300",children:"Wallet"}),(0,l.jsx)("div",{className:"font-bold text-white",children:e.walletScore})]}),(0,l.jsxs)("div",{className:"bg-purple-900/30 p-2 rounded border border-purple-500/20",children:[(0,l.jsx)("div",{className:"text-xs text-purple-300",children:"Telegram"}),(0,l.jsx)("div",{className:"font-bold text-white",children:e.telegramScore})]})]}),t&&(0,l.jsx)("div",{className:"mt-3 p-2 bg-red-900/20 rounded border border-red-500/20",children:(0,l.jsxs)("p",{className:"text-xs text-red-200",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Limited data:"})," To get a complete profile and accurate total score, please connect your wallet and Telegram account."]})})]},e.id)})})})]})}),(0,l.jsx)("div",{className:"flex-1 ".concat(n?"md:max-w-[calc(100%-24rem)]":"w-full"),children:(0,l.jsxs)("div",{className:"p-6 bg-[#1a1a2e]/80 rounded-lg border border-purple-500/30 shadow-xl",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-none bg-purple-600 mr-2"}),(0,l.jsx)("span",{className:"text-white text-sm",children:"Full Users"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-none bg-red-400 mr-2"}),(0,l.jsx)("span",{className:"text-white text-sm",children:"Temporary Users"})]})]}),(0,l.jsx)("canvas",{ref:g,className:"w-full aspect-[4/3] rounded-lg border border-purple-500/30 bg-black/50",style:{boxShadow:"0 0 30px rgba(138, 43, 226, 0.15)"}}),(0,l.jsx)("div",{className:"mt-2 text-xs text-purple-300 text-center",children:(0,l.jsx)("span",{className:"italic",children:"Hover over a user to see details"})})]}),0===r.length&&0===o.length&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-purple-900/20 rounded-lg border border-purple-500/20 text-center",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-2 text-purple-300",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("path",{d:"M12 16v-4"}),(0,l.jsx)("path",{d:"M12 8h.01"})]}),(0,l.jsx)("p",{className:"text-purple-100",children:"Enter a Twitter username to plot it on the graph. The X-axis represents total score, and the Y-axis represents total badges."})]})]})})]}),(0,l.jsxs)("div",{className:"flex justify-center mt-6 gap-4",children:[(0,l.jsxs)("button",{onClick:()=>d(!n),className:"px-4 py-2 bg-purple-600/80 hover:bg-purple-700 border border-purple-500/50 text-white rounded-full flex items-center shadow-lg shadow-purple-900/20 transition-all",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,l.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),(0,l.jsx)("path",{d:"M5 3v4"}),(0,l.jsx)("path",{d:"M19 17v4"}),(0,l.jsx)("path",{d:"M3 5h4"}),(0,l.jsx)("path",{d:"M17 19h4"})]}),"User details"]}),(0,l.jsxs)("button",{onClick:()=>{a([]),i([]),localStorage.removeItem("users"),b("All users have been cleared.")},className:"px-4 py-2 bg-pink-500/70 hover:bg-pink-600 border border-pink-400/50 text-white rounded-full flex items-center shadow-lg shadow-pink-900/20 transition-all",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,l.jsx)("path",{d:"M3 6h18"}),(0,l.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,l.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,l.jsx)("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),(0,l.jsx)("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),"Clear all"]})]}),(0,l.jsx)("div",{className:"text-center text-xs text-gray-400 mt-8",children:(0,l.jsx)("p",{children:"For a proper plot with total score and total badges, please login with all required logins"})})]})})}},622:function(e,t,r){"use strict";var l=r(2265),s=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,r){var l,n={},d=null,c=null;for(l in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,l)&&!i.hasOwnProperty(l)&&(n[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===n[l]&&(n[l]=t[l]);return{$$typeof:s,type:e,key:d,ref:c,props:n,_owner:o.current}}t.jsx=n,t.jsxs=n},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[484,744],function(){return e(e.s=4723)}),_N_E=e.O()}]);